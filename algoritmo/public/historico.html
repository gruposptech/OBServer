<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico de Sensores - Observer</title>
    <link rel="stylesheet" href="./css/historico.css">
</head>
<body>
    <div class="container-painel">
        <div class="barra-lateral">
            <div class="secao-logo">
                <img src="./img/logo.png" alt="Logo Observer" class="logo">
            </div>

            <div class="secao-usuario">
                <h2 class="nome-usuario">João Silva</h2>
                <p class="cargo-usuario">Analista de Infraestrutura</p>
                <p class="email-usuario">joao.silva@empresa.com</p>
            </div>

            <div class="secao-filtro">
                <h3 class="titulo-filtro">Período de Análise:</h3>
                <div class="opcao-filtro">
                    <input type="checkbox" id="ultima-hora" name="ultima-hora">
                    <label for="ultima-hora">Dados Recentes</label>
                </div>
                <div class="opcao-filtro">
                    <input type="checkbox" id="24-horas" name="24-horas" checked>
                    <label for="24-horas">24 horas</label>
                </div>
                <div class="opcao-filtro">
                    <input type="checkbox" id="7-dias" name="7-dias">
                    <label for="7-dias">7 dias</label>
                </div>
                <div class="opcao-filtro">
                    <input type="checkbox" id="30-dias" name="30-dias">
                    <label for="30-dias">30 dias</label>
                </div>
            </div>

            <div class="secao-filtro">
                <h3 class="titulo-filtro">Localização:</h3>
                <div class="opcao-filtro">
                    <input type="checkbox" id="datacenter" name="datacenter" checked>
                    <label for="datacenter">Datacenter Principal</label>
                </div>
                <div class="opcao-filtro">
                    <input type="checkbox" id="backup" name="backup">
                    <label for="backup">Sala de Backup</label>
                </div>
                <div class="opcao-filtro">
                    <input type="checkbox" id="servidores" name="servidores">
                    <label for="servidores">Sala de Servidores A</label>
                </div>
            </div>

            <div class="botoes-navegacao">
                <button class="botao-voltar" onclick="window.location.href='index.html'">Voltar ao Monitor</button>
                <button class="botao-sair">Sair</button>
            </div>
        </div>

        <div class="conteudo-principal">
            <div class="cabecalho">
                <h1>Histórico de Sensores - Datacenter Principal</h1>
                <div class="data-hora">22/04/2025 - 18:00</div>
            </div>

            <div class="grid-sensores">
                <div class="sensor-card">
                    <div class="sensor-header">
                        <h3>Sensor T01 <span class="status-ativo">●</span></h3>
                        <span class="info-icon" title="Sensor de temperatura localizado próximo ao rack principal">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack Principal - Corredor Frio</p>
                        <p class="tipo">Temperatura</p>
                        <p class="valor">23.5°C</p>
                        <p class="status">Funcionando normalmente</p>
                        <p class="ultima-leitura">Última leitura: 2 min atrás</p>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <h3>Sensor U01 <span class="status-ativo">●</span></h3>
                        <span class="info-icon" title="Sensor de umidade localizado próximo ao rack principal">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack Principal - Corredor Frio</p>
                        <p class="tipo">Umidade</p>
                        <p class="valor">45%</p>
                        <p class="status">Funcionando normalmente</p>
                        <p class="ultima-leitura">Última leitura: 1 min atrás</p>
                    </div>
                </div>

                <div class="sensor-card alerta">
                    <div class="sensor-header">
                        <h3>Sensor T02 <span class="status-alerta">●</span></h3>
                        <span class="info-icon" title="Sensor de temperatura localizado no corredor quente">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack 02 - Corredor Quente</p>
                        <p class="tipo">Temperatura</p>
                        <p class="valor">28.7°C</p>
                        <p class="status">Atenção - Temperatura elevada</p>
                        <p class="ultima-leitura">Última leitura: 30 seg atrás</p>
                    </div>
                </div>

                <div class="sensor-card">
                    <div class="sensor-header">
                        <h3>Sensor U02 <span class="status-ativo">●</span></h3>
                        <span class="info-icon" title="Sensor de umidade localizado no corredor quente">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack 02 - Corredor Quente</p>
                        <p class="tipo">Umidade</p>
                        <p class="valor">43%</p>
                        <p class="status">Funcionando normalmente</p>
                        <p class="ultima-leitura">Última leitura: 1 min atrás</p>
                    </div>
                </div>

                <div class="sensor-card inativo">
                    <div class="sensor-header">
                        <h3>Sensor T03 <span class="status-inativo">●</span></h3>
                        <span class="info-icon" title="Sensor de temperatura localizado próximo ao ar condicionado">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack 03 - Próximo AC</p>
                        <p class="tipo">Temperatura</p>
                        <p class="valor">--°C</p>
                        <p class="status">Sensor Inativo</p>
                        <p class="ultima-leitura">Última leitura: 2h atrás</p>
                    </div>
                </div>

                <div class="sensor-card critico">
                    <div class="sensor-header">
                        <h3>Sensor U03 <span class="status-critico">●</span></h3>
                        <span class="info-icon" title="Sensor de umidade localizado próximo ao ar condicionado">ⓘ</span>
                    </div>
                    <div class="sensor-info">
                        <p class="localizacao">Rack 03 - Próximo AC</p>
                        <p class="tipo">Umidade</p>
                        <p class="valor">35%</p>
                        <p class="status">Crítico - Umidade baixa</p>
                        <p class="ultima-leitura">Última leitura: 1 min atrás</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="secao-detalhes">
            <h2>DETALHES DO SENSOR</h2>
            <div class="grafico-historico">
                <canvas id="grafico-sensor"></canvas>
            </div>
            <div class="info-sensor-detalhado">
                <h3>Informações Detalhadas</h3>
                <p><strong>ID do Sensor:</strong> T01</p>
                <p><strong>Tipo:</strong> Temperatura</p>
                <p><strong>Localização:</strong> Rack Principal - Corredor Frio</p>
                <p><strong>Última Manutenção:</strong> 15/03/2025</p>
                <p><strong>Próxima Manutenção:</strong> 15/06/2025</p>
                <p><strong>Fabricante:</strong>Arduino</p>
                <p><strong>Modelo:</strong>DHT11</p>
                <p><strong>Precisão:</strong> ±0.5°C</p>
            </div>
            <button class="botao-exportar">Exportar Dados</button>
            <button class="botao-manutencao">Agendar Manutenção</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('grafico-sensor');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['14h', '15h', '16h', '17h', '18h'],
                    datasets: [{
                        label: 'Temperatura °C',
                        data: [22, 23, 23.5, 24, 23.5],
                        borderColor: '#4BACC6',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Histórico das Últimas 5 Horas'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        });

        function updateTime() {
            const now = new Date();
            const formattedDate = now.toLocaleDateString('pt-BR');
            const formattedTime = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            document.querySelector('.data-hora').textContent = `${formattedDate} - ${formattedTime}`;
        }

        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>