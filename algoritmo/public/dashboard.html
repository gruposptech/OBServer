<!DOCTYPE html>
<html lang="pt">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Painel de Monitoramento Observer</title>
		<link rel="stylesheet" href="./css/style_dash.css" />
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
	</head>

	<body>
		<div class="container-painel">
			<div class="barra-lateral">
				<div class="secao-logo">
					<img src="../img/logo.png" alt="Logo Observer" class="logo" />
				</div>
				<div class="secao-usuario">
					<h2 class="nome-usuario">Olá, <span class="nome-usuario" id="nomeUsuario"></span>!</h2>
					<p class="cargo-usuario"><span id="cargoUsuario"></span> - <span id="empresaUsuario"></span></p>
					<p class="email-usuario" id="emailUsuario"></p>
				</div>

				<div class="secao-filtro">
					<h3 class="titulo-filtro">Período de Análise:</h3>
					<div class="opcao-filtro">
						<input type="radio" id="tempo-real" name="radio-periodo" checked />
						<label for="tempo-real">Dados recentes</label>
					</div>
					<div class="opcao-filtro">
						<input type="radio" id="7-dias" name="radio-periodo" />
						<label for="7-dias">7 dias</label>
					</div>
					<div class="opcao-filtro">
						<input type="radio" id="15-dias" name="radio-periodo" />
						<label for="15-dias">15 dias</label>
					</div>
				</div>

				<div class="secao-filtro" id="secao-filtro">
					<h3 class="titulo-filtro">Localização:</h3>
				</div>
				<br />

				<button class="botao-sair">Sair</button>
			</div>

			<div class="conteudo-principal">
				<div class="cabecalho">
					<h1>Monitoramento de Temperatura e Umidade - <span id="nome-sala-titulo"></span></h1>
					<div class="data-hora" id="data-hora"></div>
				</div>

				<div class="cartoes-status">
					<div class="cartao-status">
						<h3>
							Temperatura média
							<span class="tooltip"
								>ⓘ
								<span class="tooltip-text"
									>A temperatura média é calculada com base em leituras horárias dos sensores DHT11, considerando o intervalo das últimas 24 horas
									para representar variações térmicas ambientais de forma contínua.</span
								>
							</span>
						</h3>
						<div class="valor">23°C <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" alt="OK" class="icone-status" /></div>
					</div>
					<div class="cartao-status">
						<h3>
							Umidade média
							<span class="tooltip"
								>ⓘ
								<span class="tooltip-text"
									>A umidade média é obtida a partir da média aritmética das leituras dos sensores instalados, desconsiderando valores extremos fora
									da faixa aceitável para garantir maior confiabilidade na análise ambiental.</span
								>
							</span>
						</h3>
						<div class="valor">44% <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" alt="OK" class="icone-status" /></div>
					</div>
					<div class="cartao-status">
						<h3>
							Última Atualização
							<span class="tooltip"
								>ⓘ
								<span class="tooltip-text">Tempo desde a última leitura dos sensores.</span>
							</span>
						</h3>
						<div class="valor">há 5 segundos</div>
					</div>

					<div class="cartao-status">
						<h3>
							Total de sensores inativos
							<span class="tooltip"
								>ⓘ
								<span class="tooltip-text" id="texto-informativo-sensores-inativos">Sensores inativos:<br /></span>
							</span>
						</h3>
						<div class="valor"><span id="qtd-sensores-inativos"></span>/<span id="qtd-sensores-total"></span></div>
					</div>
				</div>

				<div class="container-graficos">
					<div class="grafico-wrapper">
						<h2>TEMPERATURA MÉDIA (°C)</h2>
						<canvas id="grafico-temperatura" width="1000" height="250" style="display: block; margin-left: auto; margin-right: auto"></canvas>
					</div>
					<div class="grafico-wrapper">
						<h2>UMIDADE MÉDIA (%)</h2>
						<canvas id="grafico-umidade" width="1000" height="250" style="display: block; margin-left: auto; margin-right: auto"></canvas>
					</div>
				</div>
			</div>
			<div class="secao-alertas">
				<h2>ALERTAS ATIVOS</h2>
				<div class="lista-alertas">
					<div class="item-alerta">
						<img src="https://cdn-icons-png.flaticon.com/512/753/753345.png" alt="Emergência" class="icone-status" />
						<div class="conteudo-alerta">
							<div class="hora-alerta">22/04/2025 - 17h30</div>
							<div class="local-alerta">Datacenter Principal - Rack 05 - Sensor C</div>
							<div class="tipo-alerta">Alerta de Temperatura</div>
							<div class="valor-alerta">T: 31,2°</div>
							<button class="botao-acao" onclick="registrarAcao(this)">Alterar Status</button>
						</div>
					</div>
					<div class="item-alerta">
						<img src="https://cdn-icons-png.flaticon.com/512/564/564619.png" alt="Atenção" class="icone-status" />
						<div class="conteudo-alerta">
							<div class="hora-alerta">22/04/2025 - 17h15</div>
							<div class="local-alerta">Datacenter Principal - Rack 02 - Sensor A</div>
							<div class="tipo-alerta">Alerta de Umidade</div>
							<div class="valor-alerta">U: 38%</div>
							<button class="botao-acao" onclick="registrarAcao(this)">Alterar Status</button>
						</div>
					</div>
					<div class="item-alerta">
						<img src="https://cdn-icons-png.flaticon.com/512/564/564619.png" alt="Atenção" class="icone-status" />
						<div class="conteudo-alerta">
							<div class="hora-alerta">22/04/2025 - 17h00</div>
							<div class="local-alerta">Datacenter Principal - Rack 08 - Sensor B</div>
							<div class="tipo-alerta">Alerta de Temperatura</div>
							<div class="valor-alerta">T: 28,5°</div>
							<button class="botao-acao" onclick="registrarAcao(this)">Alterar Status</button>
						</div>
					</div>
					<div class="item-alerta">
						<img src="https://cdn-icons-png.flaticon.com/512/564/564619.png" alt="Atenção" class="icone-status" />
						<div class="conteudo-alerta">
							<div class="hora-alerta">22/04/2025 - 17h00</div>
							<div class="local-alerta">Datacenter Principal - Rack 08 - Sensor B</div>
							<div class="tipo-alerta">Alerta de Temperatura</div>
							<div class="valor-alerta">T: 28,5°</div>
							<button class="botao-acao" onclick="registrarAcao(this)">Alterar Status</button>
						</div>
					</div>
				</div>
				<button class="botao-historico">Histórico de Alertas</button>
				<div class="secao-niveis">
					<h2>LEGENDA <br />NÍVEIS DE MONITORAMENTO</h2>
					<div class="container-itens-niveis">
						<div class="item-nivel">
							<div class="item-nivel-icone-titulo">
								<img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" alt="Normal" class="icone-status" />
								<p class="item-nivel-titulo">Normal</p>
							</div>
							<p class="item-nivel-descricao">
								T: <span id="temp-min-ideal"></span>°C a <span id="temp-max-ideal"></span>°C<br /><br />U: <span id="umid-min-ideal"></span>% a
								<span id="umid-max-ideal"></span>%
							</p>
						</div>
						<div class="item-nivel">
							<div class="item-nivel-icone-titulo">
								<img src="https://cdn-icons-png.flaticon.com/512/564/564619.png" alt="Atenção" class="icone-status" />
								<p class="item-nivel-titulo">Atenção</p>
							</div>
							<p class="item-nivel-descricao">
								T: &lt;<span id="temp-min-alerta"></span>°C ou &gt;<span id="temp-max-alerta"></span>°C <br /><br />
								U: &lt;<span id="umid-min-alerta"></span>% ou &gt;<span id="umid-max-alerta"></span>%
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- <script src="../js/graficos.js"></script> -->
	</body>
</html>
<script>
	var idEmpresa = sessionStorage.ID_EMPRESA;
	let proximaAtualizacao;

	function pegarParametros() {
		fetch(`/usuarios/pegarParametros/${idEmpresa}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((resposta) => {
						console.log('PARÂMETROS RECEBIDOS COM SUCESSO!');
						console.log('Dados recebidos: ', JSON.stringify(resposta));
						sessionStorage.TEMP_MIN_IDEAL = resposta[0].tempMinIdeal;
						sessionStorage.TEMP_MAX_IDEAL = resposta[0].tempMaxIdeal;
						sessionStorage.UMID_MIN_IDEAL = resposta[0].umidadeMinIdeal;
						sessionStorage.UMID_MAX_IDEAL = resposta[0].umidadeMaxIdeal;
					});
				} else {
					throw 'ERRO AO PEGAR OS PARÂMETROS DA EMPRESA';
				}
			})
			.catch((erro) => {
				console.log('#ERRO: ', erro);
			});
	}

	function exibirRacksDoUsuario() {
		var racks = JSON.parse(sessionStorage.RACKS);

		racks.forEach((item) => {
			document.getElementById('secao-filtro').innerHTML += `
			<div class="opcao-filtro">
						<input type="checkbox" id="rack-${item.idRack}" name="rack-${item.idRack}" class="checkbox-sala" onchange="gerCheckbox(this)"/>
						<label for="rack-${item.idRack}" id="label-rack-${item.idRack}" >${
				item.descricao.charAt(0).toUpperCase() + item.descricao.slice(1).toLowerCase()
			}</label>
			</div>
			`;

			obterDadosGraficoTemp(item.idRack);
			obterDadosGraficoUmid(item.idRack);
		});
	}

	function gerCheckbox(checkboxAtual) {
		var maxCheckboxes = 3;
		var checkboxes = document.querySelectorAll('.checkbox-sala');
		var contCheckboxes = 0;

		checkboxes.forEach((checkbox) => {
			if (checkbox.checked) {
				contCheckboxes++;
			}
		});

		if (contCheckboxes > maxCheckboxes) {
			checkboxAtual.checked = false;
			alert('Máximo de 3 racks permitidos!');
			return;
		}

		trocaTitulo();
	}

	function trocaTitulo() {
		//selecionando o span que exibe o nome da sala no topo da tela
		var spanTitulo = document.getElementById('nome-sala-titulo');
		// selecionando todas as checkbox
		var checkBoxes = document.getElementsByClassName('checkbox-sala');
		// criando uma variável para guardar o titulo da sala
		var titulo = '';

		// laço for que percorre todas as checkboxes
		for (var i = 0; i < checkBoxes.length; i++) {
			// a variável checkBox é a checkbox da posição i da lista checkBoxes
			var checkBox = checkBoxes[i];

			//se a checkBox está marcada...
			if (checkBox.checked) {
				var nomeSala = '';

				// checando qual checkbox está marcada e atriuindo o nome dela a variavel nomeSala
				var racks = JSON.parse(sessionStorage.RACKS);

				racks.forEach((item) => {
					if (checkBox.name == `rack-${item.idRack}`) {
						nomeSala = item.descricao.charAt(0).toUpperCase() + item.descricao.slice(1).toLowerCase();
					}
				});

				// se o título não está vazio, eu adiciono uma vírgula para separar os nomes
				if (titulo != '') {
					titulo += ', ';
				}

				// adicionando o nome da sala a variavel título
				titulo += nomeSala;
			}
		}

		// trocando o span do título para a variável título
		spanTitulo.innerHTML = titulo;
	}

	function exibeDataHora() {
		// selecionadno a div que exibe a data e a hora na dashboard pelo ID
		var divDataHora = document.getElementById('data-hora');

		// atualizando a hora a cada 1 minuto
		setInterval(() => {
			// pegando a data atual e colocando em uma variável
			var data = new Date();

			// inserindo a data e hora formatadas para o nosso local (pt-BR) na div que selecionei
			divDataHora.innerHTML = `${data.toLocaleDateString('pt-BR')} - ${data.toLocaleTimeString('pt-BR')}`;
		}, 1000);
	}

	function sensores() {
		fetch(`/sensores/totalSensores/${idEmpresa}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((resposta) => {
						document.getElementById('qtd-sensores-total').innerHTML = resposta[0]['count(*)'];
					});
				} else {
					throw 'ERRO AO PEGAR O TOTAL DE SENSORES!';
				}
			})
			.catch((erro) => {
				console.log('Erro no fetch do total de sensores: ', erro);
			});

		sensoresInativos();
	}

	function sensoresInativos() {
		fetch(`/sensores/sensoresInativos/${idEmpresa}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((resposta) => {
						document.getElementById('qtd-sensores-inativos').innerHTML = resposta.length;
						resposta.forEach((item) => {
							document.getElementById('texto-informativo-sensores-inativos').innerHTML += `<br><p>Sensor: ${item.nomeSensor}<br>Localização: ${
								item.descricao.charAt(0).toUpperCase() + item.descricao.slice(1).toLowerCase()
							}</p><br>`;
						});
					});
				} else {
					throw 'ERRO AO PEGAR OS SENSORES INATIVOS!';
				}
			})
			.catch((erro) => {
				console.log('Erro no fetch dos sensores inativos: ', erro);
			});
	}

	function obterDadosGraficoTemp(idRack) {
		if (proximaAtualizacao != undefined) {
			clearTimeout(proximaAtualizacao);
		}

		fetch(`/leituras/ultimasTemp/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((resposta) => {
						console.log('Dados recebidos: ', JSON.stringify(resposta));
						resposta.reverse();

						plotarGraficoTemp(resposta, idRack);
					});
				} else {
					console.error('Nenhum dado encontrado ou erro na API');
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados p/ gráfico: ${erro.message}`);
			});
	}

	function obterDadosGraficoUmid(idRack) {
		if (proximaAtualizacao != undefined) {
			clearTimeout(proximaAtualizacao);
		}

		fetch(`/leituras/ultimasUmid/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((resposta) => {
						console.log('Dados recebidos: ', JSON.stringify(resposta));
						resposta.reverse();

						plotarGraficoUmid(resposta, idRack);
					});
				} else {
					console.error('Nenhum dado encontrado ou erro na API');
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados p/ gráfico: ${erro.message}`);
			});
	}

	function plotarGraficoTemp(resposta, idRack) {
		console.log('Iniciando plotagem do grafico de temperatura...');

		let labels = [];

		let dadosTemp = {
			labels: labels,
			datasets: [
				{
					label: '',
					data: [],
					backgroundColor: 'transparent',
					tension: 0.4,
					pointBackgroundColor: 'orange',
					borderColor: 'orange',
				},
			],
		};

		console.log('----------------------------------------------');
		console.log('Estes dados foram recebidos pela funcao "obterDadosGraficoTemp" e passados para "plotarGraficoTemp":');
		console.log(resposta);

		for (var i = 0; i < resposta.length; i++) {
			var registro = resposta[i];
			labels.push(registro.data_grafico);
			dadosTemp.datasets[0].data.push(registro.temperatura);
		}

		console.log('----------------------------------------------');
		console.log('O gráfico de temperatura será plotado com os respectivos valores:');
		console.log('Labels:');
		console.log(labels);
		console.log('Dados:');
		console.log(dadosTemp.datasets);
		console.log('----------------------------------------------');

		const configTemp = {
			type: 'line',
			data: dadosTemp,
			options: {
				layout: {
					padding: {
						top: 10,
						bottom: 10,
						left: 10,
						right: 10,
					},
				},
				plugins: {
					legend: { display: false },
					datalabels: {
						align: 'top',
						anchor: 'end',
						color: '#000',
						font: { weight: 'bold', size: 12 },
						formatter: Math.round,
					},
				},
				interaction: { mode: 'index' },
				scales: {
					x: {
						title: {
							display: true,
							text: 'Horário do dia',
							color: '#000',
							font: { size: 10, weight: 'bold' },
						},
						ticks: { color: '#000', font: { size: 12 } },
						grid: { color: 'rgba(0,0,0,0.05)' },
					},
					y: {
						beginAtZero: true,
						min: 0,
						max: 40,
						title: {
							display: true,
							text: 'Temperatura (°C)',
							color: '#000',
							font: { size: 10, weight: 'bold' },
						},
						ticks: { stepSize: 10, color: '#000', font: { size: 12 } },
						grid: { color: 'rgba(0,0,0,0.05)' },
					},
				},
			},
			plugins: [ChartDataLabels],
		};

		let myChart = new Chart(document.getElementById('grafico-temperatura'), configTemp);

		setTimeout(() => atualizarGraficoTemp(idRack, dadosTemp, myChart), 2000);
	}

	function plotarGraficoUmid(resposta, idRack) {
		console.log('Iniciando plotagem do grafico de umidade...');

		let labels = [];

		let dados = {
			labels: labels,
			datasets: [
				{
					label: '',
					data: [],
					backgroundColor: 'transparent',
					tension: 0.4,
					pointBackgroundColor: '#0cc0df',
					borderColor: '#0cc0df',
				},
			],
		};

		console.log('----------------------------------------------');
		console.log('Estes dados foram recebidos pela funcao "obterDadosGraficoUmid" e passados para "plotarGraficoUmid":');
		console.log(resposta);

		for (var i = 0; i < resposta.length; i++) {
			var registro = resposta[i];
			labels.push(registro.data_grafico);
			dados.datasets[0].data.push(registro.umidade);
		}

		console.log('----------------------------------------------');
		console.log('O gráfico de umidade será plotado com os respectivos valores:');
		console.log('Labels:');
		console.log(labels);
		console.log('Dados:');
		console.log(dados.datasets.data);
		console.log('----------------------------------------------');

		const config = {
			type: 'line',
			data: dados,
			options: {
				layout: {
					padding: {
						top: 10,
						bottom: 10,
						left: 10,
						right: 10,
					},
				},
				plugins: {
					legend: { display: false },
					datalabels: {
						align: 'top',
						anchor: 'end',
						color: '#000',
						font: { weight: 'bold', size: 12 },
						formatter: Math.round,
					},
				},
				interaction: { mode: 'index' },
				scales: {
					x: {
						title: {
							display: true,
							text: 'Horário do dia',
							color: '#000',
							font: { size: 10, weight: 'bold' },
						},
						ticks: { color: '#000', font: { size: 12 } },
						grid: { color: 'rgba(0,0,0,0.05)' },
					},
					y: {
						beginAtZero: true,
						min: 30,
						max: 100,
						title: {
							display: true,
							text: 'Umidade (%)',
							color: '#000',
							font: { size: 10, weight: 'bold' },
						},
						ticks: { stepSize: 10, color: '#000', font: { size: 12 } },
						grid: { color: 'rgba(0,0,0,0.05)' },
					},
				},
			},
			plugins: [ChartDataLabels],
		};

		let myChart = new Chart(document.getElementById('grafico-umidade'), config);

		setTimeout(() => atualizarGraficoUmid(idRack, dados, myChart), 2000);
	}

	function obterdadosTemp(idRack) {
		fetch(`/leituras/tempo-realTemp/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.status == 200) {
					response.json().then((resposta) => {
						console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
						// alertar(resposta, fkRack);
					});
				} else {
					console.error(`Nenhum dado encontrado para o id ${idRack} ou erro na API`);
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados do rack p/ gráfico: ${error.message}`);
			});
	}

	function obterdadosUmid(idRack) {
		fetch(`/leituras/tempo-realUmid/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.status == 200) {
					response.json().then((resposta) => {
						console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
						// alertar(resposta, fkRack);
					});
				} else {
					console.error(`Nenhum dado encontrado para o id ${idRack} ou erro na API`);
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados do rack p/ gráfico: ${error.message}`);
			});
	}

	function atualizarGraficoTemp(idRack, dados, myChart) {
		fetch(`/leituras/tempo-realTemp/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((novoRegistro) => {
						obterdadosTemp(idRack);
						console.log(`Dados recebidos de temperatura: ${JSON.stringify(novoRegistro)}`);
						console.log(`Dados atuais do gráfico de temperatura:`);
						console.log(dados);

						if (novoRegistro[0] == dados.labels[dados.labels.length - 1]) {
							console.log('---------------------------------------------------------------');
							console.log('Como não há dados novos para captura, o gráfico de temperatura não atualizará.');
							console.log('Horário do novo dado de temperatura capturado:');
							console.log(novoRegistro[0].data_grafico);
							console.log('Horário do último dado de umidade capturado:');
							console.log(dados.labels[dados.labels.length - 1]);
							console.log('---------------------------------------------------------------');
						} else {
							dados.labels.shift(); // apagar o primeiro
							dados.labels.push(novoRegistro[0].data_grafico); // incluir um novo momento

							dados.datasets[0].data.shift(); // apagar o primeiro de temperatura
							dados.datasets[0].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

							myChart.update();
						}

						proximaAtualizacao = setTimeout(() => atualizarGraficoTemp(idRack, dados, myChart), 2000);
					});
				} else {
					console.error('Nenhum dado encontrado ou erro na API');
					// Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
					proximaAtualizacao = setTimeout(() => atualizarGraficoTemp(idRack, dados, myChart), 2000);
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados p/ gráfico: ${erro.message}`);
			});
	}

	function atualizarGraficoUmid(idRack, dados, myChart) {
		fetch(`/leituras/tempo-realUmid/${idRack}`, { cache: 'no-store' })
			.then((response) => {
				if (response.ok) {
					response.json().then((novoRegistro) => {
						obterdadosUmid(idRack);
						console.log(`Dados recebidos de umidade: ${JSON.stringify(novoRegistro)}`);
						console.log(`Dados atuais do gráfico de umidade:`);
						console.log(dados);

						if (novoRegistro[0] == dados.labels[dados.labels.length - 1]) {
							console.log('---------------------------------------------------------------');
							console.log('Como não há dados novos para captura, o gráfico de umidade não atualizará.');
							console.log('Horário do novo dado de umidade capturado:');
							console.log(novoRegistro[0].data_grafico);
							console.log('Horário do último dado de umidade capturado:');
							console.log(dados.labels[dados.labels.length - 1]);
							console.log('---------------------------------------------------------------');
						} else {
							dados.labels.shift(); // apagar o primeiro
							dados.labels.push(novoRegistro[0].data_grafico); // incluir um novo momento

							dados.datasets[0].data.shift(); // apagar o primeiro de temperatura
							dados.datasets[0].data.push(novoRegistro[0].umidade); // incluir uma nova medida de temperatura

							myChart.update();
						}

						proximaAtualizacao = setTimeout(() => atualizarGraficoUmid(idRack, dados, myChart), 2000);
					});
				} else {
					console.error('Nenhum dado encontrado ou erro na API');
					// Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
					proximaAtualizacao = setTimeout(() => atualizarGraficoUmid(idRack, dados, myChart), 2000);
				}
			})
			.catch((erro) => {
				console.error(`Erro na obtenção dos dados p/ gráfico: ${erro.message}`);
			});
	}

	window.onload = () => {
		var nomeUsuario = sessionStorage.NOME_FUNCIONARIO;
		var cargoUsuario = sessionStorage.CARGO_FUNCIONARIO;
		var emailUsuario = sessionStorage.EMAIL_FUNCIONARIO;
		var empresaUsuario = sessionStorage.NOME_EMPRESA;

		var tempMin = sessionStorage.TEMP_MIN_IDEAL;
		var tempMax = sessionStorage.TEMP_MAX_IDEAL;

		var umidMin = sessionStorage.UMID_MIN_IDEAL;
		var umidMax = sessionStorage.UMID_MAX_IDEAL;

		document.getElementById('nomeUsuario').innerHTML = nomeUsuario[0].toUpperCase() + nomeUsuario.substr(1);
		document.getElementById('cargoUsuario').innerHTML = cargoUsuario[0].toUpperCase() + cargoUsuario.substr(1);
		document.getElementById('emailUsuario').innerHTML = emailUsuario;
		document.getElementById('empresaUsuario').innerHTML = empresaUsuario[0].toUpperCase() + empresaUsuario.substr(1);

		document.getElementById('temp-min-ideal').innerHTML = tempMin;
		document.getElementById('temp-max-ideal').innerHTML = tempMax;
		document.getElementById('umid-min-ideal').innerHTML = umidMin;
		document.getElementById('umid-max-ideal').innerHTML = umidMax;
		document.getElementById('temp-min-alerta').innerHTML = tempMin;
		document.getElementById('temp-max-alerta').innerHTML = tempMax;
		document.getElementById('umid-min-alerta').innerHTML = umidMin;
		document.getElementById('umid-max-alerta').innerHTML = umidMax;

		trocaTitulo();
		pegarParametros();
		exibirRacksDoUsuario();
		exibeDataHora();
		sensores();
	};
</script>
